<template>

    <div class="slds-card" style="margin-bottom:10px;">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-custom-custom83" title={label.HeadingMetadataChanges}>
                        <lightning-icon icon-name="custom:custom83" title={label.HeadingMetadataChanges} size="small"></lightning-icon>
                    </span>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <lightning-formatted-url value={changesRelatedListUrl} label={changeRelatedListHeader} target="_self" class="slds-card__header-link slds-truncate"></lightning-formatted-url>
                        <span style="position:relative;top:-3px;left:5px;">
                            <lightning-helptext content={changeRelatedListHeaderHelp}></lightning-helptext>
                        </span>
                    </h2>
                </div>
            </header>
        </div>
        
        
        
        <div class="slds-card__body slds-card__body_inner">

            <!-- show an empty state illustration card with a call to action to log a change via a story -->
            <template lwc:if={hideChangeTable}>

                <div class="slds-illustration slds-illustration_small">
                    <img src={imageEmptyState02} class="slds-illustration__svg" />
                    
                    <div class="slds-text-longform">
                        <h3 class="slds-text-heading_medium">{label.ChangeEmptyHeading}</h3>
                        <p class="slds-text-body_regular"><strong>{label.ChangeEmptyText1}</strong></p>
                        <p class="slds-text-body_regular">{label.ChangeEmptyText2}</p>
                    </div>
                </div>

            </template>

            <!-- show the change table -->
            <template lwc:else>

                <template lwc:if={isLoading}>
                    <div style="height:200px;" class="iab-spinner-container">
                        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                    </div>
                </template>

                <template lwc:else>
                    <div style="display:block;">
                        <lightning-datatable
                            key-field="Id"
                            data={mockChanges}
                            columns={columns}
                            hide-checkbox-column
                            column-widths-mode="auto"
                            onrowaction={handleChangeMenuAction}
            
                            default-sort-direction={sortDirectionDefault}
                            sorted-direction={sortDirection}
                            sorted-by={sortedBy}
                            onsort={handleSort}>
                        </lightning-datatable>
                    </div>
                </template>
                
            </template>

        </div>
        
    </div>

</template>